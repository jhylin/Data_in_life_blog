<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jennifer HY Lin">
<meta name="dcterms.date" content="2022-09-19">

<title>Home - Long COVID - an update</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5CHVP3K63C"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-5CHVP3K63C', { 'anonymize_ip': true});
</script>
<script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="../../site_libs/jquery-1.12.4/jquery.min.js"></script>
<link href="../../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="../../site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="../../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="../../site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="../../site_libs/leaflet-binding-2.1.1/leaflet.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Home</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../past_projects.html">
 <span class="menu-text">Past projects</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jhylin"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bsky.app/profile/jhylin.bsky.social">
 <span class="menu-text"><i class="fa-brands fa-bluesky" aria-label="bluesky"></i></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://fosstodon.org/@jhylin"><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/jenhylin"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/jennifer-hy-lin-a9b86981/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://jhylin.github.io/CV_resume_quarto/">
 <span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Long COVID - an update</h1>
            <p class="subtitle lead">PDF table scraping, bar graph, interactive map &amp; wordcloud</p>
                                <div class="quarto-categories">
                <div class="quarto-category">Data analytics projects</div>
                <div class="quarto-category">R</div>
                <div class="quarto-category">Python</div>
                <div class="quarto-category">Long COVID</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Jennifer HY Lin </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 19, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background"><strong>Background</strong></a></li>
  <li><a href="#source-of-dataset" id="toc-source-of-dataset" class="nav-link" data-scroll-target="#source-of-dataset"><strong>Source of dataset</strong></a></li>
  <li><a href="#data-scraping-from-pdf" id="toc-data-scraping-from-pdf" class="nav-link" data-scroll-target="#data-scraping-from-pdf"><strong>Data scraping from PDF</strong></a></li>
  <li><a href="#data-inspection-and-wrangling" id="toc-data-inspection-and-wrangling" class="nav-link" data-scroll-target="#data-inspection-and-wrangling"><strong>Data inspection and wrangling</strong></a>
  <ul>
  <li><a href="#separating-columns-and-change-column-type" id="toc-separating-columns-and-change-column-type" class="nav-link" data-scroll-target="#separating-columns-and-change-column-type"><strong>Separating columns and change column type</strong></a></li>
  <li><a href="#separating-rows" id="toc-separating-rows" class="nav-link" data-scroll-target="#separating-rows"><strong>Separating rows</strong></a></li>
  <li><a href="#a-frequency-count-showing-types-of-comorbidities-in-long-covid" id="toc-a-frequency-count-showing-types-of-comorbidities-in-long-covid" class="nav-link" data-scroll-target="#a-frequency-count-showing-types-of-comorbidities-in-long-covid"><strong>A frequency count showing types of comorbidities in long COVID</strong></a></li>
  </ul></li>
  <li><a href="#data-visualisations" id="toc-data-visualisations" class="nav-link" data-scroll-target="#data-visualisations"><strong>Data visualisations</strong></a>
  <ul>
  <li><a href="#bar-graph-for-hospitalisation-rate" id="toc-bar-graph-for-hospitalisation-rate" class="nav-link" data-scroll-target="#bar-graph-for-hospitalisation-rate"><strong>Bar graph for hospitalisation rate</strong></a></li>
  <li><a href="#interactive-map-for-long-covid-results" id="toc-interactive-map-for-long-covid-results" class="nav-link" data-scroll-target="#interactive-map-for-long-covid-results"><strong>Interactive map for long COVID results</strong></a>
  <ul>
  <li><a href="#preparing-dataframe-for-map" id="toc-preparing-dataframe-for-map" class="nav-link" data-scroll-target="#preparing-dataframe-for-map"><strong>Preparing dataframe for map</strong></a></li>
  </ul></li>
  <li><a href="#text-mining-for-word-cloud" id="toc-text-mining-for-word-cloud" class="nav-link" data-scroll-target="#text-mining-for-word-cloud"><strong>Text mining for word cloud</strong></a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><strong>Summary</strong></a>
  <ul>
  <li><a href="#acknowledgement" id="toc-acknowledgement" class="nav-link" data-scroll-target="#acknowledgement"><strong>Acknowledgement</strong></a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/jhylin/Data_in_life_blog/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="background" class="level4">
<h4 class="anchored" data-anchor-id="background"><strong>Background</strong></h4>
<p>This was another update on the current long COVID saga around the world that I thought to follow up from my earlier work (details in the <a href="https://jhylin.github.io/Data-analytics-and-research-blog/posts/2.%20Long%20COVID%20data%20in%20SQL/LongCOVIDSQL.html">SQL</a> and <a href="https://jhylin.github.io/Data-analytics-and-research-blog/posts/3.%20Long%20COVID%20dashboard/TableauDashboard.html">Tableau</a> projects). This time the dataset was obtained from another journal paper, which had data collected until July 2021 (the previous paper was only until March 2021). I’ve used Python to extract a table from the PDF of the paper and also Excel to assist with data cleaning. This was followed by using R to analyse and visualise all the data.</p>
</section>
<section id="source-of-dataset" class="level4">
<h4 class="anchored" data-anchor-id="source-of-dataset"><strong>Source of dataset</strong></h4>
<p>Journal paper by Healey Q, Sheikh A, Daines L, Vasileiou E. Symptoms and signs of long COVID: A rapid review and meta-analysis. J Glob Health 2022;12:05014. <em>Creative Commons Attribution 4.0 International Public License</em></p>
</section>
<section id="data-scraping-from-pdf" class="level4">
<h4 class="anchored" data-anchor-id="data-scraping-from-pdf"><strong>Data scraping from PDF</strong></h4>
<p>The dataset was scraped from a PDF obtained via PubMed (journal paper source as shown above) by using tabula-py (<em>for details please see this post, “<a href="https://jhylin.github.io/Data_in_life_blog/posts/6.%20Long%20COVID%20update/ExtractTableFromPDF.html">Table scraping from PDF</a>”</em>). Unfortunately I had trouble installing a similar R package remotely after it was archived (tabulizer package with known issues in its GitHub repository) so I trialled tabula-py instead. It worked for scraping all the data from the target table, but the downside was that the scraped data did not inherit the original tabular format on PDF, with columns and rows all jumbled. I’ve discussed a little bit more on the likely reason for this in the blog post link above. So in short, the final scraped table was cleaned in Excel and saved as .csv file, which was then imported as shown below.</p>
</section>
<section id="data-inspection-and-wrangling" class="level4">
<h4 class="anchored" data-anchor-id="data-inspection-and-wrangling"><strong>Data inspection and wrangling</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Uncomment below if requiring installations of packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("wordcloud")</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("RColorBrewer")</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("tidytext")</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("leaflet")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Loading all the required libraries below. Install libraries needed as shown in code above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Full_table.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
Rows: 75 Columns: 9
── Column specification
──────────────────────────────────────────────────────── Delimiter: "," chr
(5): Author (country), Hospital (%) {ICU (%)}, Comorbidities, Body syste... dbl
(2): Age (years), Follow-up time (days) lgl (2): ...8, ...9
ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
Specify the column types or set `show_col_types = FALSE` to quiet this message.
• `` -&gt; `...8`
• `` -&gt; `...9`</code></pre>
</div>
</div>
<div class="cell">

</div>
<p>Here’s a quick overview on the hospitalisation rates across all the studies from this paper.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df_hosp <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">Author (country)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Hospital (%) {ICU (%)}</span><span class="st">`</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>df_hosp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 75 × 2
   `Author (country)` `Hospital (%) {ICU (%)}`
   &lt;chr&gt;              &lt;chr&gt;                   
 1 Bellan (Italy)     100 {12}                
 2 Bellan (Italy)     &lt;NA&gt;                    
 3 Bellan (Italy)     &lt;NA&gt;                    
 4 Bellan (Italy)     &lt;NA&gt;                    
 5 Bellan (Italy)     &lt;NA&gt;                    
 6 Bliddal (Denmark)  0                       
 7 Bliddal (Denmark)  &lt;NA&gt;                    
 8 Bliddal (Denmark)  &lt;NA&gt;                    
 9 Bliddal (Denmark)  &lt;NA&gt;                    
10 Bliddal (Denmark)  &lt;NA&gt;                    
# … with 65 more rows
# ℹ Use `print(n = ...)` to see more rows</code></pre>
</div>
</div>
<section id="separating-columns-and-change-column-type" class="level5">
<h5 class="anchored" data-anchor-id="separating-columns-and-change-column-type"><strong>Separating columns and change column type</strong></h5>
<p>The table column of Hospital (%) {ICU (%)} was separated into two separate columns to allow clearer differentiation between hospital and ICU rates within each study. The data type for Hospital (%) column was also changed from character to numeric so we can plot a bar graph later on (otherwise the x-axis may not be accurate or properly shown).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df_hosp_icu <span class="ot">&lt;-</span> df_hosp <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># separate column into two columns</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="st">`</span><span class="at">Hospital (%) {ICU (%)}</span><span class="st">`</span>, <span class="fu">c</span>(<span class="st">"Hospital (%)"</span>, <span class="st">"ICU (%)"</span>))<span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># change column type</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="st">`</span><span class="at">Hospital (%)</span><span class="st">`</span>, as.numeric))</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># show the first 10 rows as example</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">head</span>(df_hosp_icu, <span class="dv">10</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">Author (country)</th>
<th style="text-align: right;">Hospital (%)</th>
<th style="text-align: left;">ICU (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: right;">100</td>
<td style="text-align: left;">12</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bliddal (Denmark)</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bliddal (Denmark)</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bliddal (Denmark)</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bliddal (Denmark)</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bliddal (Denmark)</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="separating-rows" class="level5">
<h5 class="anchored" data-anchor-id="separating-rows"><strong>Separating rows</strong></h5>
<p>The listed co-morbidities for each study were separated into separate rows, rather than into columns, to avoid adding too many columns all at once.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>df_new <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(Comorbidities, <span class="at">sep =</span> <span class="st">", "</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the first 10 rows as example</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="fu">head</span>(df_new, <span class="dv">10</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(e)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 11%">
<col style="width: 15%">
<col style="width: 8%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 19%">
<col style="width: 3%">
<col style="width: 3%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Author (country)</th>
<th style="text-align: left;">Hospital (%) {ICU (%)}</th>
<th style="text-align: right;">Age (years)</th>
<th style="text-align: left;">Comorbidities</th>
<th style="text-align: right;">Follow-up time (days)</th>
<th style="text-align: left;">Body system</th>
<th style="text-align: left;">Results</th>
<th style="text-align: left;">…8</th>
<th style="text-align: left;">…9</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: left;">100 {12}</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">41% hypertension</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Generalised/MSK</td>
<td style="text-align: left;">5.9% myalgia, 5.9% arthralgia</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: left;">100 {12}</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">15% diabetes</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Generalised/MSK</td>
<td style="text-align: left;">5.9% myalgia, 5.9% arthralgia</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: left;">100 {12}</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">11% obesity</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Generalised/MSK</td>
<td style="text-align: left;">5.9% myalgia, 5.9% arthralgia</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: left;">100 {12}</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">11% endocrine disease</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Generalised/MSK</td>
<td style="text-align: left;">5.9% myalgia, 5.9% arthralgia</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: left;">100 {12}</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">10% malignancy</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Generalised/MSK</td>
<td style="text-align: left;">5.9% myalgia, 5.9% arthralgia</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: left;">100 {12}</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">9% IHD</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Generalised/MSK</td>
<td style="text-align: left;">5.9% myalgia, 5.9% arthralgia</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: left;">100 {12}</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">8% dyslipidaemia</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Generalised/MSK</td>
<td style="text-align: left;">5.9% myalgia, 5.9% arthralgia</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: left;">100 {12}</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">7% AF</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Generalised/MSK</td>
<td style="text-align: left;">5.9% myalgia, 5.9% arthralgia</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: left;">100 {12}</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">6% COPD</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Generalised/MSK</td>
<td style="text-align: left;">5.9% myalgia, 5.9% arthralgia</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bellan (Italy)</td>
<td style="text-align: left;">100 {12}</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">6% CKD</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Generalised/MSK</td>
<td style="text-align: left;">5.9% myalgia, 5.9% arthralgia</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="a-frequency-count-showing-types-of-comorbidities-in-long-covid" class="level5">
<h5 class="anchored" data-anchor-id="a-frequency-count-showing-types-of-comorbidities-in-long-covid"><strong>A frequency count showing types of comorbidities in long COVID</strong></h5>
<p>I then noticed how the comorbidities for each study were listed with different percentages and to gather a quick initial overall picture of the data, I started by removing these digits and percentage symbols. Obviously since I was still quite new to R (started using R in July), I soon ran into a problem as I kept on getting stuck with not having the count() function to actually count unique elements under the co-morbidities column.</p>
<p>By looking at the magnified circle on the right in the image below, you would notice a subtle difference in spacing, so yes the culprit was the <strong>space</strong><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> and once it was removed, count() worked nicely as how it should be. One small downside was that it would also remove the space between the co-morbidity terms e.g.&nbsp;“liver disease” became “liverdisease”, but since it achieved the aim intended to do unique counts on all the co-morbidities, I left it as it was.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Zoom-in shot.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Screenshot of the extra space(s) in dataframe</figcaption><p></p>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df_new <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove % symbol, numbers and don't forget to remove spaces as well in the column! </span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Comorbidities =</span> <span class="fu">str_remove_all</span>(Comorbidities, <span class="st">"[:digit:]|[%]|[ ]"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add this line to filter out all the "NA"s</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Comorbidities)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Count the comorbidities in descending order</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Comorbidities, <span class="at">sort =</span> <span class="cn">TRUE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 37 × 2
   Comorbidities     n
   &lt;chr&gt;         &lt;int&gt;
 1 diabetes         14
 2 hypertension     13
 3 IHD              10
 4 asthma            9
 5 COPD              9
 6 obesity           9
 7 CKD               6
 8 malignancy        5
 9 dyslipidaemia     4
10 liverdisease      4
# … with 27 more rows
# ℹ Use `print(n = ...)` to see more rows</code></pre>
</div>
</div>
<p>Now we could observe the top 3 frequency of all co-morbidities listed were: diabetes, hypertension and IHD<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. These were followed by, unsurprisingly, common respiratory illnesses such as asthma, COPD<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, then obesity, and also CKD<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>, malignancy, dyslipidaemia and so on. These would be considered as high risk factors of developing long COVID symptoms if someone had these co-morbidities present before being infected by the coronoviruses.</p>
</section>
</section>
<section id="data-visualisations" class="level4">
<h4 class="anchored" data-anchor-id="data-visualisations"><strong>Data visualisations</strong></h4>
<section id="bar-graph-for-hospitalisation-rate" class="level5">
<h5 class="anchored" data-anchor-id="bar-graph-for-hospitalisation-rate"><strong>Bar graph for hospitalisation rate</strong></h5>
<p>Then a line of code to filter out the results of “NA” under the column of Hospital (%) was added. Most of the cells with “NA” were there to fill the multiple empty row entries for other variables and not for the Hospital (%) column, therefore these “NA”s were removed in this instance. The horizontal bar graph below showed the COVID-19 hospitalisation rate for studies in different countries, presenting a very diverse results between 0% and 100% hospitalisations across all 19 cohort studies.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df_hosp_icu <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter out all NAs</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Hospital (%)</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># plot the bar graph</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Author (country)</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Hospital (%)</span><span class="st">`</span>)) <span class="sc">+</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Long_COVID_update_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">COVID-19 hospitalisation rate across different countries</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><em>Note</em>: two of the studies were removed from above, these studies were by Chiesa-Estomba (Italy) and Mahmud (Bangladesh), which had “Not stated” recorded under Hospital (%) {ICU (%)} column. When the Hospital (%) column was converted from character to numeric, these two rows were converted to “NA” automatically.</p>
</section>
<section id="interactive-map-for-long-covid-results" class="level5">
<h5 class="anchored" data-anchor-id="interactive-map-for-long-covid-results"><strong>Interactive map for long COVID results</strong></h5>
<section id="preparing-dataframe-for-map" class="level6">
<h6 class="anchored" data-anchor-id="preparing-dataframe-for-map"><strong>Preparing dataframe for map</strong></h6>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df_new_a <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># separate Author (country) column into two columns </span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># note: rename country as region - needed for joining data later on</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="st">`</span><span class="at">Author (country)</span><span class="st">`</span>, <span class="fu">c</span>(<span class="st">"Author"</span>, <span class="st">"region"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print only the columns as selected</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">region</span><span class="st">`</span>, Results)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co"># The study author name, Fernandez-de-Las-Penas (Spain), got separated as above</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co"># so replace "de" under Country column with the actual country name of Spain</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>df_new_a[df_new_a <span class="sc">==</span> <span class="st">"de"</span>] <span class="ot">&lt;-</span> <span class="st">"Spain"</span> </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Show first 10 rows as example</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">head</span>(df_new_a, <span class="dv">10</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 8%">
<col style="width: 91%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">region</th>
<th style="text-align: left;">Results</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Italy</td>
<td style="text-align: left;">5.9% myalgia, 5.9% arthralgia</td>
</tr>
<tr class="even">
<td style="text-align: left;">Italy</td>
<td style="text-align: left;">5.5% dyspnoea, 2.5% cough, 0.4% chest pain, 51.6% reduced DLCO, normal spirometry</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Italy</td>
<td style="text-align: left;">43% PTSD symptoms</td>
</tr>
<tr class="even">
<td style="text-align: left;">Italy</td>
<td style="text-align: left;">5% gustatory dysfunction, 4.6% olfactory dysfunction</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Italy</td>
<td style="text-align: left;">1.3% diarrhoea</td>
</tr>
<tr class="even">
<td style="text-align: left;">Denmark</td>
<td style="text-align: left;">fatigue, myalgia, arthralgia, chills, fever</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Denmark</td>
<td style="text-align: left;">dyspnoea, cough, chest pain, sputum production</td>
</tr>
<tr class="even">
<td style="text-align: left;">Denmark</td>
<td style="text-align: left;">memory issues, concentration issues, headache</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Denmark</td>
<td style="text-align: left;">olfactory dysfunction, gustatory dysfunction, sore throat, rhinorrhoea, sneezing</td>
</tr>
<tr class="even">
<td style="text-align: left;">Denmark</td>
<td style="text-align: left;">diarrhoea, anorexia, abdominal pain, nausea</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df_new_a <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># re-group dataframe based on region column</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">region</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># merge all rows under Results column into one string</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">toString</span>(.)))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 2
   region     Results                                                           
   &lt;chr&gt;      &lt;chr&gt;                                                             
 1 Australia  50% fatigue, 35.7% arthralgia, 21.4% myalgia, 28.6% cough, 25% dy…
 2 Austria    24% night sweats, 0% fever, 63% abnormal chest CT: ground-glass o…
 3 Bangladesh 33% fatigue, 1.4% arthralgia, 0.6% myalgia, 8.5% cough, 7% dyspno…
 4 Belgium    25% fatigue, abnormal chest CT: 67% ground glass opacities, 44% r…
 5 China      62% abnormal chest CT: 35% fibrotic-like changes, 27% ground glas…
 6 Denmark    fatigue, myalgia, arthralgia, chills, fever, dyspnoea, cough, che…
 7 Estomba    51% olfactory dysfunction                                         
 8 France     16.8% olfactory dysfunction, 9.6% gustatory dysfunction, fatigue,…
 9 Germany    45% fatigue, 15% myalgia, 3% fever, slight pain/discomfort, 33% d…
10 Italy      5.9% myalgia, 5.9% arthralgia, 5.5% dyspnoea, 2.5% cough, 0.4% ch…
11 Spain      61.2% fatigue, 23.3% dyspnoea, 6.5% chest pain, 2.5% cough        
12 UK         fatigue, myalgia, fever, dyspnoea, cough, chest pain, headache, p…
13 USA        44.8% fatigue, 21.3% myalgia, 15.8% arthralgia, 1.1% fever, 1.1% …</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grab the world map data from ggplot</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>mapdata <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">"world"</span>) </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># view full dataset in separate tab </span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(mapdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine mapdata dataframe (contains longitudes &amp; latitudes of each country) </span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># with df_new_a dataframe (contains country info)</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>mapdata <span class="ot">&lt;-</span> <span class="fu">left_join</span>(mapdata, df1, <span class="at">by =</span> <span class="st">"region"</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mapdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       long      lat group order region subregion Results
1 -69.89912 12.45200     1     1  Aruba      &lt;NA&gt;    &lt;NA&gt;
2 -69.89571 12.42300     1     2  Aruba      &lt;NA&gt;    &lt;NA&gt;
3 -69.94219 12.43853     1     3  Aruba      &lt;NA&gt;    &lt;NA&gt;
4 -70.00415 12.50049     1     4  Aruba      &lt;NA&gt;    &lt;NA&gt;
5 -70.06612 12.54697     1     5  Aruba      &lt;NA&gt;    &lt;NA&gt;
6 -70.05088 12.59707     1     6  Aruba      &lt;NA&gt;    &lt;NA&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter out all the empty or "NA" cells</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>mapdata_new <span class="ot">&lt;-</span> mapdata <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(mapdata<span class="sc">$</span>Results))</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mapdata_new)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      long       lat group order    region                   subregion
1 123.5945 -12.42568   133  7115 Australia Ashmore and Cartier Islands
2 123.5952 -12.43594   133  7116 Australia Ashmore and Cartier Islands
3 123.5732 -12.43418   133  7117 Australia Ashmore and Cartier Islands
4 123.5725 -12.42393   133  7118 Australia Ashmore and Cartier Islands
5 123.5945 -12.42568   133  7119 Australia Ashmore and Cartier Islands
6 158.8788 -54.70976   139  7267 Australia            Macquarie Island
                                                                                                                                                                      Results
1 50% fatigue, 35.7% arthralgia, 21.4% myalgia, 28.6% cough, 25% dyspnoea, 3.6% chest pain, 10.7% headache, 28.6% olfactory dysfunction, 14.3% rhinorrhoea, no abdominal pain
2 50% fatigue, 35.7% arthralgia, 21.4% myalgia, 28.6% cough, 25% dyspnoea, 3.6% chest pain, 10.7% headache, 28.6% olfactory dysfunction, 14.3% rhinorrhoea, no abdominal pain
3 50% fatigue, 35.7% arthralgia, 21.4% myalgia, 28.6% cough, 25% dyspnoea, 3.6% chest pain, 10.7% headache, 28.6% olfactory dysfunction, 14.3% rhinorrhoea, no abdominal pain
4 50% fatigue, 35.7% arthralgia, 21.4% myalgia, 28.6% cough, 25% dyspnoea, 3.6% chest pain, 10.7% headache, 28.6% olfactory dysfunction, 14.3% rhinorrhoea, no abdominal pain
5 50% fatigue, 35.7% arthralgia, 21.4% myalgia, 28.6% cough, 25% dyspnoea, 3.6% chest pain, 10.7% headache, 28.6% olfactory dysfunction, 14.3% rhinorrhoea, no abdominal pain
6 50% fatigue, 35.7% arthralgia, 21.4% myalgia, 28.6% cough, 25% dyspnoea, 3.6% chest pain, 10.7% headache, 28.6% olfactory dysfunction, 14.3% rhinorrhoea, no abdominal pain</code></pre>
</div>
</div>
<p>I realised that map_data(“world”) showed all the longitudes and latitudes for subregions of each country, which might not be required for the map I wanted. So after trialling the map visualisation several times, I opted to use centroids of each country instead, to leave the map in a cleaner and easy-to-see state. Otherwise one of the maps I tested before ended up with countless blobs of circles marking the boundaries of each country, looking like a 5-year-old’s map drawing!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>mapdata_final <span class="ot">&lt;-</span> mapdata_new <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Using centroids of countries = means of longitudes and latitudes for each country</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">long =</span> <span class="fu">mean</span>(long), <span class="at">lat =</span> <span class="fu">mean</span>(lat))</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(mapdata_final)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">region</th>
<th style="text-align: right;">long</th>
<th style="text-align: right;">lat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Australia</td>
<td style="text-align: right;">136.998543</td>
<td style="text-align: right;">-25.18300</td>
</tr>
<tr class="even">
<td style="text-align: left;">Austria</td>
<td style="text-align: right;">13.473366</td>
<td style="text-align: right;">47.57973</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bangladesh</td>
<td style="text-align: right;">90.506118</td>
<td style="text-align: right;">23.50905</td>
</tr>
<tr class="even">
<td style="text-align: left;">Belgium</td>
<td style="text-align: right;">4.732104</td>
<td style="text-align: right;">50.59063</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">106.847575</td>
<td style="text-align: right;">35.08244</td>
</tr>
<tr class="even">
<td style="text-align: left;">Denmark</td>
<td style="text-align: right;">10.731255</td>
<td style="text-align: right;">55.70473</td>
</tr>
<tr class="odd">
<td style="text-align: left;">France</td>
<td style="text-align: right;">3.226979</td>
<td style="text-align: right;">46.16686</td>
</tr>
<tr class="even">
<td style="text-align: left;">Germany</td>
<td style="text-align: right;">10.401156</td>
<td style="text-align: right;">51.20461</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Italy</td>
<td style="text-align: right;">11.752853</td>
<td style="text-align: right;">42.16598</td>
</tr>
<tr class="even">
<td style="text-align: left;">Spain</td>
<td style="text-align: right;">-2.906821</td>
<td style="text-align: right;">40.67995</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UK</td>
<td style="text-align: right;">-4.098750</td>
<td style="text-align: right;">55.55813</td>
</tr>
<tr class="even">
<td style="text-align: left;">USA</td>
<td style="text-align: right;">-121.625310</td>
<td style="text-align: right;">48.74333</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># join above mapdata_final with the df1 which contains countries and long COVID results</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>df1_mapdata <span class="ot">&lt;-</span> <span class="fu">left_join</span>(mapdata_final, df1, <span class="at">by =</span> <span class="st">"region"</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df1_mapdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 96%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">region</th>
<th style="text-align: right;">long</th>
<th style="text-align: right;">lat</th>
<th style="text-align: left;">Results</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Australia</td>
<td style="text-align: right;">136.998543</td>
<td style="text-align: right;">-25.18300</td>
<td style="text-align: left;">50% fatigue, 35.7% arthralgia, 21.4% myalgia, 28.6% cough, 25% dyspnoea, 3.6% chest pain, 10.7% headache, 28.6% olfactory dysfunction, 14.3% rhinorrhoea, no abdominal pain</td>
</tr>
<tr class="even">
<td style="text-align: left;">Austria</td>
<td style="text-align: right;">13.473366</td>
<td style="text-align: right;">47.57973</td>
<td style="text-align: left;">24% night sweats, 0% fever, 63% abnormal chest CT: ground-glass opacities, reticular lesions, consolidations, bronchial dilation. 36% dyspnoea, abnormal spirometry: 22% reduced FVC, 22% reduced FEV1, normal FEV1/FVC. 21% reduced DLCO, 17% cough, 22% sleep disorders, 19% olfactory dysfunction, 9% diarrhoea/vomiting, 97% normal LVEF, 55% diastolic dysfunction on echo, 23% raised NT-proBNP, 10% pulmonary hypertension, 1% pericardial effusion, raised D-dimer, potentially raised ferritin, normal CRP, normal procalcitonin, normal IL-6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bangladesh</td>
<td style="text-align: right;">90.506118</td>
<td style="text-align: right;">23.50905</td>
<td style="text-align: left;">33% fatigue, 1.4% arthralgia, 0.6% myalgia, 8.5% cough, 7% dyspnoea, 0.8% chest pain, 3.9% circadian rhythm disorders, 3.4% headache, 2.3% sleep disturbance, 1.4% adjustment disorder, 2.3% vertigo, 2% olfactory dysfunction, 1.4% palpitation</td>
</tr>
<tr class="even">
<td style="text-align: left;">Belgium</td>
<td style="text-align: right;">4.732104</td>
<td style="text-align: right;">50.59063</td>
<td style="text-align: left;">25% fatigue, abnormal chest CT: 67% ground glass opacities, 44% reticulations, 20% fibrotic lesions/traction bronchiectasis, 7% consolidations. 46% reduced DLCO, 35% dyspnoea, 10% dry cough, 4% chest tightness, normal spirometry</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">106.847575</td>
<td style="text-align: right;">35.08244</td>
<td style="text-align: left;">62% abnormal chest CT: 35% fibrotic-like changes, 27% ground glass opacities/interstitial thickening, nodules/masses, interlobar pleural traction, pulmonary atelectasis and bronchiectasis. 26% reduced DLCO, 14% mild dyspnoea, 10% sputum production, 6.1% dry cough</td>
</tr>
<tr class="even">
<td style="text-align: left;">Denmark</td>
<td style="text-align: right;">10.731255</td>
<td style="text-align: right;">55.70473</td>
<td style="text-align: left;">fatigue, myalgia, arthralgia, chills, fever, dyspnoea, cough, chest pain, sputum production, memory issues, concentration issues, headache, olfactory dysfunction, gustatory dysfunction, sore throat, rhinorrhoea, sneezing, diarrhoea, anorexia, abdominal pain, nausea, red runny eyes, 63% fatigue, 35% myalgia, 53% dyspnoea, 24% cough, 20% chest pain, 12% sputum production, 45% concentration issues, 27% headache, 27% paraesthesia, 31% gustatory dysfunction, 27% olfactory dysfunction, 10% sore throat, 10% abdominal pain, 8% diarrhoea, 8% nausea, 4% anorexia</td>
</tr>
<tr class="odd">
<td style="text-align: left;">France</td>
<td style="text-align: right;">3.226979</td>
<td style="text-align: right;">46.16686</td>
<td style="text-align: left;">16.8% olfactory dysfunction, 9.6% gustatory dysfunction, fatigue, arthralgia, myalgia, dyspnoea, cough, headache, rhinorrhoea, olfactory dysfunction, gustatory dysfunction, sore throat</td>
</tr>
<tr class="even">
<td style="text-align: left;">Germany</td>
<td style="text-align: right;">10.401156</td>
<td style="text-align: right;">51.20461</td>
<td style="text-align: left;">45% fatigue, 15% myalgia, 3% fever, slight pain/discomfort, 33% dyspnoea, 33% cough. Normal spirometry, normal ABG, reduced DLCO, reduced distance on 6MWT, 18% cognitive issues, 15% headache, mild depression, subthreshold anxiety, 12% olfactory dysfunction, 12% rhinorrhoea, 9% gustatory dysfunction, 9% sore throat, 9% diarrhoea, 6% nausea, 3% abdominal pain, normal LFTs, 18% angina, normal left ventricular function, normal right ventricular function, normal cardiac biomarkers, normal FBC, normal coagulation screen, raised ferritin, potentially raised D-dimer, normal U&amp;Es, normal CRP, normal procalcitonin, normal TFTs, normal IL-6, 17% fatigue, depression, concentration issues, 27% olfactory/gustatory dysfunction, alopecia, 42.3% subjective olfactory dysfunction, 26.9% objective olfactory dysfunction (discrimination and identification issues)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Italy</td>
<td style="text-align: right;">11.752853</td>
<td style="text-align: right;">42.16598</td>
<td style="text-align: left;">5.9% myalgia, 5.9% arthralgia, 5.5% dyspnoea, 2.5% cough, 0.4% chest pain, 51.6% reduced DLCO, normal spirometry, 43% PTSD symptoms, 5% gustatory dysfunction, 4.6% olfactory dysfunction, 1.3% diarrhoea, 13.1% fatigue, 8.2% rheumatological issues, 6% dyspnoea, 2% cough, 0.8% chest pain, 9.6% neurological disorders, 4.9% psychiatric disorders, 2.7% headache, 10.4% olfactory/gustatory dysfunction, 1.5% gastrointestinal disorders, 3.7% alopecia, 3.4% cutaneous manifestations, 0.3% ocular symptoms, 21% olfactory dysfunction, 7.9% gustatory dysfunction</td>
</tr>
<tr class="even">
<td style="text-align: left;">Spain</td>
<td style="text-align: right;">-2.906821</td>
<td style="text-align: right;">40.67995</td>
<td style="text-align: left;">61.2% fatigue, 23.3% dyspnoea, 6.5% chest pain, 2.5% cough</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UK</td>
<td style="text-align: right;">-4.098750</td>
<td style="text-align: right;">55.55813</td>
<td style="text-align: left;">fatigue, myalgia, fever, dyspnoea, cough, chest pain, headache, paraesthesia, numbness, concentration/ memory issues, olfactory dysfunction, sore throat, hoarse voice, tinnitus, earache, diarrhoea, abdominal pain, palpitations/tachycardia</td>
</tr>
<tr class="even">
<td style="text-align: left;">USA</td>
<td style="text-align: right;">-121.625310</td>
<td style="text-align: right;">48.74333</td>
<td style="text-align: left;">44.8% fatigue, 21.3% myalgia, 15.8% arthralgia, 1.1% fever, 1.1% ulcer, 31.7% dyspnoea, 25.1% cough, 14.8% sputum production, 12.6% headache, 8.7% cognitive issues, 9.8% gustatory dysfunction, 9.3% olfactory dysfunction, 3.8% diarrhoea, 8.2% eye irritation, 1.1% ulcer</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare pop up information</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>df1_mapdata <span class="ot">&lt;-</span> df1_mapdata <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># paste region and Results columns into popup_info and add it as a new column into dataset</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># bold texts and add break lines by using html tags as shown</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">popup_info =</span> <span class="fu">paste</span>(<span class="st">"&lt;b&gt;"</span>,region,<span class="st">"&lt;/b&gt;"</span>,<span class="st">"&lt;br/&gt;"</span>,<span class="st">"&lt;b&gt;"</span>,<span class="st">"Long COVID symptoms:"</span>,<span class="st">"&lt;/b&gt;"</span>,<span class="st">"&lt;br/&gt;"</span>, Results))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>df1_mapdata</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 5
   region        long   lat Results                                      popup…¹
   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                                        &lt;chr&gt;  
 1 Australia   137.   -25.2 50% fatigue, 35.7% arthralgia, 21.4% myalgi… &lt;b&gt; Au…
 2 Austria      13.5   47.6 24% night sweats, 0% fever, 63% abnormal ch… &lt;b&gt; Au…
 3 Bangladesh   90.5   23.5 33% fatigue, 1.4% arthralgia, 0.6% myalgia,… &lt;b&gt; Ba…
 4 Belgium       4.73  50.6 25% fatigue, abnormal chest CT: 67% ground … &lt;b&gt; Be…
 5 China       107.    35.1 62% abnormal chest CT: 35% fibrotic-like ch… &lt;b&gt; Ch…
 6 Denmark      10.7   55.7 fatigue, myalgia, arthralgia, chills, fever… &lt;b&gt; De…
 7 France        3.23  46.2 16.8% olfactory dysfunction, 9.6% gustatory… &lt;b&gt; Fr…
 8 Germany      10.4   51.2 45% fatigue, 15% myalgia, 3% fever, slight … &lt;b&gt; Ge…
 9 Italy        11.8   42.2 5.9% myalgia, 5.9% arthralgia, 5.5% dyspnoe… &lt;b&gt; It…
10 Spain        -2.91  40.7 61.2% fatigue, 23.3% dyspnoea, 6.5% chest p… &lt;b&gt; Sp…
11 UK           -4.10  55.6 fatigue, myalgia, fever, dyspnoea, cough, c… &lt;b&gt; UK…
12 USA        -122.    48.7 44.8% fatigue, 21.3% myalgia, 15.8% arthral… &lt;b&gt; US…
# … with abbreviated variable name ¹​popup_info</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># initialising the graphics environment for map</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add circle markers to map</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># use the df1_mapdata dataset containing countries, longitudes, latitudes and long COVID results</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add data, latitudes, longitudes, radius of circles, pop up information</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(<span class="at">data =</span> df1_mapdata, <span class="at">lat =</span> <span class="sc">~</span>lat, <span class="at">lng =</span> <span class="sc">~</span>long, <span class="at">radius =</span> <span class="sc">~</span><span class="dv">3</span>, <span class="at">popup =</span> <span class="sc">~</span>popup_info)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-6e7b029f5abdf20926fb" style="width:100%;height:464px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-6e7b029f5abdf20926fb">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[-25.1829968212449,47.5797318991493,23.5090516557296,50.5906272841377,35.082435437586,55.7047330613104,46.166861050188,51.2046085478554,42.1659824923549,40.6799529790878,55.5581316630046,48.7433333759119],[136.998543415789,13.4733656855191,90.5061180392901,4.73210363007762,106.847574829439,10.731254580837,3.22697920310042,10.4011560552557,11.7528526644143,-2.90682090616818,-4.09875010597435,-121.625310071961],3,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},null,null,["<b> Australia <\/b> <br/> <b> Long COVID symptoms: <\/b> <br/> 50% fatigue, 35.7% arthralgia, 21.4% myalgia, 28.6% cough, 25% dyspnoea, 3.6% chest pain, 10.7% headache, 28.6% olfactory dysfunction, 14.3% rhinorrhoea, no abdominal pain","<b> Austria <\/b> <br/> <b> Long COVID symptoms: <\/b> <br/> 24% night sweats, 0% fever, 63% abnormal chest CT: ground-glass opacities, reticular lesions, consolidations, bronchial dilation. 36% dyspnoea, abnormal spirometry: 22% reduced FVC, 22% reduced FEV1, normal FEV1/FVC. 21% reduced DLCO, 17% cough, 22% sleep disorders, 19% olfactory dysfunction, 9% diarrhoea/vomiting, 97% normal LVEF, 55% diastolic dysfunction on echo, 23% raised NT-proBNP, 10% pulmonary hypertension, 1% pericardial effusion, raised D-dimer, potentially raised ferritin, normal CRP, normal procalcitonin, normal IL-6","<b> Bangladesh <\/b> <br/> <b> Long COVID symptoms: <\/b> <br/> 33% fatigue, 1.4% arthralgia, 0.6% myalgia, 8.5% cough, 7% dyspnoea, 0.8% chest pain, 3.9% circadian rhythm disorders, 3.4% headache, 2.3% sleep disturbance, 1.4% adjustment disorder, 2.3% vertigo, 2% olfactory dysfunction, 1.4% palpitation","<b> Belgium <\/b> <br/> <b> Long COVID symptoms: <\/b> <br/> 25% fatigue, abnormal chest CT: 67% ground glass opacities, 44% reticulations, 20% fibrotic lesions/traction bronchiectasis, 7% consolidations. 46% reduced DLCO, 35% dyspnoea, 10% dry cough, 4% chest tightness, normal spirometry","<b> China <\/b> <br/> <b> Long COVID symptoms: <\/b> <br/> 62% abnormal chest CT: 35% fibrotic-like changes, 27% ground glass opacities/interstitial thickening, nodules/masses, interlobar pleural traction, pulmonary atelectasis and bronchiectasis. 26% reduced DLCO, 14% mild dyspnoea, 10% sputum production, 6.1% dry cough","<b> Denmark <\/b> <br/> <b> Long COVID symptoms: <\/b> <br/> fatigue, myalgia, arthralgia, chills, fever, dyspnoea, cough, chest pain, sputum production, memory issues, concentration issues, headache, olfactory dysfunction, gustatory dysfunction, sore throat, rhinorrhoea, sneezing, diarrhoea, anorexia, abdominal pain, nausea, red runny eyes, 63% fatigue, 35% myalgia, 53% dyspnoea, 24% cough, 20% chest pain, 12% sputum production, 45% concentration issues, 27% headache, 27% paraesthesia, 31% gustatory dysfunction, 27% olfactory dysfunction, 10% sore throat, 10% abdominal pain, 8% diarrhoea, 8% nausea, 4% anorexia","<b> France <\/b> <br/> <b> Long COVID symptoms: <\/b> <br/> 16.8% olfactory dysfunction, 9.6% gustatory dysfunction, fatigue, arthralgia, myalgia, dyspnoea, cough, headache, rhinorrhoea, olfactory dysfunction, gustatory dysfunction, sore throat","<b> Germany <\/b> <br/> <b> Long COVID symptoms: <\/b> <br/> 45% fatigue, 15% myalgia, 3% fever, slight pain/discomfort, 33% dyspnoea, 33% cough. Normal spirometry, normal ABG, reduced DLCO, reduced distance on 6MWT, 18% cognitive issues, 15% headache, mild depression, subthreshold anxiety, 12% olfactory dysfunction, 12% rhinorrhoea, 9% gustatory dysfunction, 9% sore throat, 9% diarrhoea, 6% nausea, 3% abdominal pain, normal LFTs, 18% angina, normal left ventricular function, normal right ventricular function, normal cardiac biomarkers, normal FBC, normal coagulation screen, raised ferritin, potentially raised D-dimer, normal U&Es, normal CRP, normal procalcitonin, normal TFTs, normal IL-6, 17% fatigue, depression, concentration issues, 27% olfactory/gustatory dysfunction, alopecia, 42.3% subjective olfactory dysfunction, 26.9% objective olfactory  dysfunction (discrimination and identification issues)","<b> Italy <\/b> <br/> <b> Long COVID symptoms: <\/b> <br/> 5.9% myalgia, 5.9% arthralgia, 5.5% dyspnoea, 2.5% cough, 0.4% chest pain, 51.6% reduced DLCO, normal spirometry, 43% PTSD symptoms, 5% gustatory dysfunction, 4.6% olfactory dysfunction, 1.3% diarrhoea, 13.1% fatigue, 8.2% rheumatological issues, 6% dyspnoea, 2% cough, 0.8% chest pain, 9.6% neurological disorders, 4.9% psychiatric disorders, 2.7% headache, 10.4% olfactory/gustatory dysfunction, 1.5% gastrointestinal disorders, 3.7% alopecia, 3.4% cutaneous manifestations, 0.3% ocular symptoms, 21% olfactory dysfunction, 7.9% gustatory dysfunction","<b> Spain <\/b> <br/> <b> Long COVID symptoms: <\/b> <br/> 61.2% fatigue, 23.3% dyspnoea, 6.5% chest pain, 2.5% cough","<b> UK <\/b> <br/> <b> Long COVID symptoms: <\/b> <br/> fatigue, myalgia, fever, dyspnoea, cough, chest pain, headache, paraesthesia, numbness, concentration/ memory issues, olfactory dysfunction, sore throat, hoarse voice, tinnitus, earache, diarrhoea, abdominal pain, palpitations/tachycardia","<b> USA <\/b> <br/> <b> Long COVID symptoms: <\/b> <br/> 44.8% fatigue, 21.3% myalgia, 15.8% arthralgia, 1.1% fever, 1.1% ulcer, 31.7% dyspnoea, 25.1% cough, 14.8% sputum production, 12.6% headache, 8.7% cognitive issues, 9.8% gustatory dysfunction, 9.3% olfactory dysfunction, 3.8% diarrhoea, 8.2% eye irritation, 1.1% ulcer"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-25.1829968212449,55.7047330613104],"lng":[-121.625310071961,136.998543415789]}},"evals":[],"jsHooks":[]}</script>
<p>Interactive map for long COVID symptoms</p>
</div>
</div>
<p><em>ABG = arterial blood gas, CT = computed tomography, CRP = c-reactive protein, DLCO = diffusing capacity for carbon monoxide, FBC = full blood count, FEV1 = forced expiratory volume in one second, FVC = forced vital capacity, IL-6 = interleukin-6, LFT = liver function test, LVEF = left ventricular ejection fraction, NT-proBNP = N-terminal pro B-type natriuretic peptide, PTSD = posttraumatic stress disorder, 6MWT = 6-min walk test, U&amp;E = urea and electrolyte, TFT = thyroid function test</em></p>
</section>
</section>
<section id="text-mining-for-word-cloud" class="level5">
<h5 class="anchored" data-anchor-id="text-mining-for-word-cloud"><strong>Text mining for word cloud</strong></h5>
<p>When skimming through the Results column, it appeared some of the terms recorded were repetitive, so a wordcloud might be another interesting way to see if it could highlight any particular long COVID symptoms from this meta-analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the results column</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> df<span class="sc">$</span>Results</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove numbers from the texts so that the digits won't appear in the wordcloud</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>text1 <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(text, <span class="st">"[:digit:]"</span>, <span class="st">""</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>text1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] ".% myalgia, .% arthralgia"                                                                                                                                                                                                                                
 [2] ".% dyspnoea, .% cough, .% chest pain, .% reduced DLCO, normal spirometry"                                                                                                                                                                                 
 [3] "% PTSD symptoms"                                                                                                                                                                                                                                          
 [4] "% gustatory dysfunction, .% olfactory dysfunction"                                                                                                                                                                                                        
 [5] ".% diarrhoea"                                                                                                                                                                                                                                             
 [6] "fatigue, myalgia, arthralgia, chills, fever"                                                                                                                                                                                                              
 [7] "dyspnoea, cough, chest pain, sputum production"                                                                                                                                                                                                           
 [8] "memory issues, concentration issues, headache"                                                                                                                                                                                                            
 [9] "olfactory dysfunction, gustatory dysfunction, sore throat, rhinorrhoea, sneezing"                                                                                                                                                                         
[10] "diarrhoea, anorexia, abdominal pain, nausea"                                                                                                                                                                                                              
[11] "red runny eyes"                                                                                                                                                                                                                                           
[12] "% olfactory dysfunction"                                                                                                                                                                                                                                  
[13] ".% olfactory dysfunction, .% gustatory dysfunction"                                                                                                                                                                                                       
[14] "% fatigue, % myalgia, % fever, slight pain/discomfort"                                                                                                                                                                                                    
[15] "% dyspnoea, % cough. Normal spirometry, normal ABG, reduced DLCO, reduced distance on MWT"                                                                                                                                                                
[16] "% cognitive issues, % headache, mild depression, subthreshold anxiety"                                                                                                                                                                                    
[17] "% olfactory dysfunction, % rhinorrhoea, % gustatory dysfunction, % sore throat"                                                                                                                                                                           
[18] "% diarrhoea, % nausea, % abdominal pain, normal LFTs"                                                                                                                                                                                                     
[19] "% angina, normal left ventricular function, normal right ventricular function, normal cardiac biomarkers"                                                                                                                                                 
[20] "normal FBC, normal coagulation screen, raised ferritin, potentially raised D-dimer, normal U&amp;Es, normal CRP, normal procalcitonin, normal TFTs, normal IL-"                                                                                               
[21] ".% fatigue"                                                                                                                                                                                                                                               
[22] ".% dyspnoea, .% chest pain, .% cough"                                                                                                                                                                                                                     
[23] "% fatigue"                                                                                                                                                                                                                                                
[24] "abnormal chest CT: % ground glass opacities, % reticulations, % fibrotic lesions/traction bronchiectasis, % consolidations. % reduced DLCO, % dyspnoea, % dry cough, % chest tightness, normal spirometry"                                                
[25] "% fatigue"                                                                                                                                                                                                                                                
[26] "depression, concentration issues"                                                                                                                                                                                                                         
[27] "% olfactory/gustatory dysfunction"                                                                                                                                                                                                                        
[28] "alopecia"                                                                                                                                                                                                                                                 
[29] "fatigue, arthralgia, myalgia"                                                                                                                                                                                                                             
[30] "dyspnoea, cough"                                                                                                                                                                                                                                          
[31] "headache"                                                                                                                                                                                                                                                 
[32] "rhinorrhoea, olfactory dysfunction, gustatory dysfunction, sore throat"                                                                                                                                                                                   
[33] "% abnormal chest CT: % fibrotic-like changes, % ground glass opacities/interstitial thickening, nodules/masses, interlobar pleural traction, pulmonary atelectasis and bronchiectasis. % reduced DLCO, % mild dyspnoea, % sputum production, .% dry cough"
[34] "% fatigue, .% arthralgia, .% myalgia"                                                                                                                                                                                                                     
[35] ".% cough, % dyspnoea, .% chest pain"                                                                                                                                                                                                                      
[36] ".% headache"                                                                                                                                                                                                                                              
[37] ".% olfactory dysfunction, .% rhinorrhoea"                                                                                                                                                                                                                 
[38] "no abdominal pain"                                                                                                                                                                                                                                        
[39] ".% fatigue, .% myalgia, .% arthralgia, .% fever, .% ulcer"                                                                                                                                                                                                
[40] ".% dyspnoea, .% cough, .% sputum production"                                                                                                                                                                                                              
[41] ".% headache, .% cognitive issues"                                                                                                                                                                                                                         
[42] ".% gustatory dysfunction, .% olfactory dysfunction"                                                                                                                                                                                                       
[43] ".% diarrhoea"                                                                                                                                                                                                                                             
[44] ".% eye irritation, .% ulcer"                                                                                                                                                                                                                              
[45] "% fatigue, % myalgia"                                                                                                                                                                                                                                     
[46] "% dyspnoea, % cough, % chest pain, % sputum production"                                                                                                                                                                                                   
[47] "% concentration issues, % headache, % paraesthesia"                                                                                                                                                                                                       
[48] "% gustatory dysfunction, % olfactory dysfunction, % sore throat"                                                                                                                                                                                          
[49] "% abdominal pain, % diarrhoea, % nausea, % anorexia"                                                                                                                                                                                                      
[50] "% fatigue, .% arthralgia, .% myalgia"                                                                                                                                                                                                                     
[51] ".% cough, % dyspnoea, .% chest pain"                                                                                                                                                                                                                      
[52] ".% circadian rhythm disorders, .% headache, .% sleep disturbance, .% adjustment disorder"                                                                                                                                                                 
[53] ".% vertigo, % olfactory dysfunction"                                                                                                                                                                                                                      
[54] ".% palpitation"                                                                                                                                                                                                                                           
[55] ".% subjective olfactory dysfunction, .% objective olfactory  dysfunction (discrimination and identification issues)"                                                                                                                                      
[56] ".% fatigue, .% rheumatological issues"                                                                                                                                                                                                                    
[57] "% dyspnoea, % cough, .% chest pain"                                                                                                                                                                                                                       
[58] ".% neurological disorders, .% psychiatric disorders, .% headache"                                                                                                                                                                                         
[59] ".% olfactory/gustatory dysfunction"                                                                                                                                                                                                                       
[60] ".% gastrointestinal disorders"                                                                                                                                                                                                                            
[61] ".% alopecia, .% cutaneous manifestations, .% ocular symptoms"                                                                                                                                                                                             
[62] "% night sweats, % fever"                                                                                                                                                                                                                                  
[63] "% abnormal chest CT: ground-glass opacities, reticular lesions, consolidations, bronchial dilation. % dyspnoea, abnormal spirometry: % reduced FVC, % reduced FEV, normal FEV/FVC. % reduced DLCO, % cough"                                               
[64] "% sleep disorders"                                                                                                                                                                                                                                        
[65] "% olfactory dysfunction"                                                                                                                                                                                                                                  
[66] "% diarrhoea/vomiting"                                                                                                                                                                                                                                     
[67] "% normal LVEF, % diastolic dysfunction on echo, % raised NT-proBNP, % pulmonary hypertension, % pericardial effusion"                                                                                                                                     
[68] "raised D-dimer, potentially raised ferritin, normal CRP, normal procalcitonin, normal IL-"                                                                                                                                                                
[69] "fatigue, myalgia, fever"                                                                                                                                                                                                                                  
[70] "dyspnoea, cough, chest pain"                                                                                                                                                                                                                              
[71] "headache, paraesthesia, numbness, concentration/ memory issues"                                                                                                                                                                                           
[72] "olfactory dysfunction, sore throat, hoarse voice, tinnitus, earache"                                                                                                                                                                                      
[73] "diarrhoea, abdominal pain"                                                                                                                                                                                                                                
[74] "palpitations/tachycardia"                                                                                                                                                                                                                                 
[75] "% olfactory dysfunction, .% gustatory dysfunction"                                                                                                                                                                                                        </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change the text into a tibble</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>text_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">line =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">75</span>, <span class="at">text =</span> text1)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>text_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 75 × 2
    line text                                                                   
   &lt;int&gt; &lt;chr&gt;                                                                  
 1     1 .% myalgia, .% arthralgia                                              
 2     2 .% dyspnoea, .% cough, .% chest pain, .% reduced DLCO, normal spiromet…
 3     3 % PTSD symptoms                                                        
 4     4 % gustatory dysfunction, .% olfactory dysfunction                      
 5     5 .% diarrhoea                                                           
 6     6 fatigue, myalgia, arthralgia, chills, fever                            
 7     7 dyspnoea, cough, chest pain, sputum production                         
 8     8 memory issues, concentration issues, headache                          
 9     9 olfactory dysfunction, gustatory dysfunction, sore throat, rhinorrhoea…
10    10 diarrhoea, anorexia, abdominal pain, nausea                            
# … with 65 more rows
# ℹ Use `print(n = ...)` to see more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tokenise the texts in the selected column</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>text_df1 <span class="ot">&lt;-</span> text_df <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>text_df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 399 × 2
    line word      
   &lt;int&gt; &lt;chr&gt;     
 1     1 myalgia   
 2     1 arthralgia
 3     2 dyspnoea  
 4     2 cough     
 5     2 chest     
 6     2 pain      
 7     2 reduced   
 8     2 dlco      
 9     2 normal    
10     2 spirometry
# … with 389 more rows
# ℹ Use `print(n = ...)` to see more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>text_df1 <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove stop_words</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Count the frequency of appearance of each word</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Then create a wordcloud</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">with</span>(<span class="fu">wordcloud</span>(word, n, <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>,<span class="st">"Dark2"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Long_COVID_update_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># display.brewer.all to display all colour palettes if wanting to use different colours</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A known drawback of wordcloud was that the length of a word might influence how big it might appear in the wordcloud, so it was not completely dependent on the word frequencies in a set of texts. Nevertheless, it was one of the ways to get a rough idea about the most common terms cropping up in collected texts. This last part was more like a small exercise for me and also for anyone who might want to try this but did not where to start.</p>
</section>
</section>
<section id="summary" class="level4">
<h4 class="anchored" data-anchor-id="summary"><strong>Summary</strong></h4>
<p>Long COVID had shown a very versatile and diverse range of signs and symptoms, often resembling other known post-viral illnesses such as myalgic encephalomyelitis and chronic fatigue syndrome, the interactive map above would enable readers to see specific long COVID symptoms for selected countries. People with diabetes, hypertension and IHD might have higher risk of suffering from long COVID if they were infected with the coronoviruses. The types of co-morbidities were not limited to these three unfortunately and several other chronic illnesses mentioned above might also contribute to similar risk. The most affected body systems in long COVID were in respiratory tract, ear, nose and throat areas, musculoskeletal parts, gastrointestinal tract and last, but not the least, neuropsychiatric systems which could bring fatigue and memory/concentration issue, or more widely known as the “brain fog”. All of these outcomes also did not vary widely from earlier meta-analyses on long COVID, reiterating the wide health ramifications that COVID-19 could inflict upon global populations.</p>
<section id="acknowledgement" class="level5">
<h5 class="anchored" data-anchor-id="acknowledgement"><strong>Acknowledgement</strong></h5>
<p>I have to thank several online resources when I was trying to build the interactive map. Most notably, I’ve adapted my code based on these two useful online resources:</p>
<ol type="1">
<li><p><a href="https://www.youtube.com/watch?v=AgWgPSZ7Gp0">R tutorial: Creating Maps and mapping data with ggplot2</a> by Dr Paul Christiansen</p></li>
<li><p><a href="https://www.youtube.com/watch?v=dx3khWsUO1Y">Creating interactive maps in R</a> by A&amp;G Statworks</p></li>
</ol>
<p>I also have to thank all the package creators for all the packages used here and all the authors of the journal paper (as mentioned under “Source of dataset”) which provided the long COVID data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.2.0 (2022-04-22)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Catalina 10.15.7

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] wordcloud_2.6      RColorBrewer_1.1-3 tidytext_0.3.4     leaflet_2.1.1     
 [5] knitr_1.39         forcats_0.5.1      stringr_1.4.0      dplyr_1.0.9       
 [9] purrr_0.3.4        readr_2.1.2        tidyr_1.2.0        tibble_3.1.8      
[13] ggplot2_3.3.6      tidyverse_1.3.2   

loaded via a namespace (and not attached):
 [1] httr_1.4.3          maps_3.4.0          bit64_4.0.5        
 [4] vroom_1.6.1         jsonlite_1.8.0      modelr_0.1.8       
 [7] assertthat_0.2.1    highr_0.9           googlesheets4_1.0.0
[10] cellranger_1.1.0    yaml_2.3.5          pillar_1.8.0       
[13] backports_1.4.1     lattice_0.20-45     glue_1.6.2         
[16] digest_0.6.29       rvest_1.0.2         colorspace_2.0-3   
[19] htmltools_0.5.5     Matrix_1.4-1        pkgconfig_2.0.3    
[22] broom_1.0.0         haven_2.5.0         scales_1.2.0       
[25] tzdb_0.3.0          googledrive_2.0.0   farver_2.1.1       
[28] generics_0.1.3      ellipsis_0.3.2      withr_2.5.0        
[31] cli_3.4.1           magrittr_2.0.3      crayon_1.5.1       
[34] readxl_1.4.0        evaluate_0.15       tokenizers_0.2.1   
[37] janeaustenr_1.0.0   fs_1.5.2            fansi_1.0.3        
[40] SnowballC_0.7.0     xml2_1.3.3          tools_4.2.0        
[43] hms_1.1.1           gargle_1.2.0        lifecycle_1.0.3    
[46] munsell_0.5.0       reprex_2.0.1        compiler_4.2.0     
[49] rlang_1.1.0         grid_4.2.0          rstudioapi_0.13    
[52] htmlwidgets_1.5.4   crosstalk_1.2.0     labeling_0.4.2     
[55] rmarkdown_2.21      gtable_0.3.0        DBI_1.1.3          
[58] R6_2.5.1            lubridate_1.8.0     fastmap_1.1.0      
[61] bit_4.0.4           utf8_1.2.2          stringi_1.7.8      
[64] parallel_4.2.0      Rcpp_1.0.9          vctrs_0.4.1        
[67] dbplyr_2.2.1        tidyselect_1.1.2    xfun_0.38          </code></pre>
</div>
</div>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>It took probably at least half an hour to figure this out… eventually I thought to look at the column itself long enough to see if I’d missed anything… then voila!<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>ischaemic heart disease<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>chronic obstructive pulmonary disease<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>chronic kidney disease<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="jhylin/Data_in_life_blog" data-repo-id="R_kgDOHw7lGQ" data-category="General" data-category-id="DIC_kwDOHw7lGc4CQzQ_" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">Website made with 💜 in <a href="https://quarto.org/">Quarto</a> by Jennifer HY Lin © 2022 - 2025</div>
  </div>
</footer>



</body></html>